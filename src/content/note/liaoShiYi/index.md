---
title: P8811 [蓝桥杯 2022 国 C] 六六大顺题解
timestamp: 2025-11-14 21:19:57+08:00
description: 蓝桥杯
author: "accuber"
---

# P8811 [蓝桥杯 2022 国 C] 六六大顺
[点击跳转题目](https://www.luogu.com.cn/problem/P8811)

## 题目描述

六六大顺，本指农历六月初六。多用于祝福中年人士家庭幸福，工作顺利，事业有成，身体健康。源自《左传》“君义，臣行，父慈，子孝，兄爱，弟敬，此数者累谓六顺也。”

$6$ 在我国自古以来是一个吉祥的数字，定义数列 $A = (a_1,a_2,\cdots,a_i,\cdots)$，其中 $a_1 = 6, a_2 = 66, \cdots, a_i = 10\cdot a_{i−1}+6$。

定义一个数列 $B = (b_1,b_2,\cdots,b_i,\cdots)$，其中 $b_1 = 6 \times 6, b_2 = 66\times66, \cdots, b_i = a_i \times a_i$。

现在小蓝想知道数列 $B$ 的前 $n$ 项的和是多少，你能帮帮小蓝吗？

## 输入格式

输入一行包含一个正整数 $n$。

## 输出格式

输出一行包含一个整数表示数列 $B$ 前 $n$ 项的和。

## 输入输出样例 #1

### 输入 #1

```
3
```

### 输出 #1

```
447948
```

## 说明/提示

**【样例说明】**

$b_1 = 6×6 = 36,b_2 = 66×66 = 4356,b_3 = 666×666 = 443556$，所以前三项的和为 $36 + 4356 + 443556 = 447948$。

**【评测用例规模与约定】**

对于 $20\%$ 的评测用例，$1≤n≤100$；

对于 $50\%$ 的评测用例，$1≤n≤10^5$；

对于所有评测用例，$1\le n\le 10^7$。

蓝桥杯 2022 国赛 C 组 H 题。

<hr></hr>

<h2>思路</h2>

需计算$B_n = \underbrace{666\cdots666}_{n} \times \underbrace{666\cdots666}_{n}$ 的前n项和, 且$1 \leq n \leq 10^7$, 如果我们用常规两数相乘，两个n位的数相乘最大会产生一个$2n$位的数, 而long long的范围也仅仅到$19$位数字，所以会爆long long, 所以我们要进行优化。  

首先, $6×6$ 产生的数不够规整，我们可以把 $6×6$ 提出来, 之后再把$36$ 乘回去, 这样我们得到了$Bn$=$36$ × $111$···$111$ × $111$···$111$. 

注意到 $111×111$ 产生的数非常规整, 如 $12321$. $j$ 个 $1$ 相乘可以得到 $2×j-1$位的形如 $123$···$j$···$321$的数,但是我们该如何构造这样的 $n$ 项数相加呢？我们可以列举处来观察规律：
```
n																			
8	1	2	3	4	5	6	7	8	7	6	5	4	3	2	1
7			1	2	3	4	5	6	7	6	5	4	3	2	1
6					1	2	3	4	5	6	5	4	3	2	1
5							1	2	3	4	5	4	3	2	1
4									1	2	3	4	3	2	1
3											1	2	3	2	1
2													1	2	1
1															1
```
我们可以看出, sum的第$i$位由$n-i+1$个$i$组成, 且从第$i(i>=2)$项开始, 每项第$2n-1$到第$n+1$位上的数字分别为$1$、$2$、···、$n-1$

如果我想将每位上所有数字相加有没有一个公式能在O(1)的时间内解决呢？

当然有: 从第$3$位开始, $1$、$2$、$1+3$、$2+4$、$1+3+5$、$2+4+6$···; 

我们不是可以用等差数列求和吗？$1$, $1+3$, $1+3+5$+···+$n$ 的前 $n$ 项和为$n^2$ ;  $2$, $2+4$, $2+4$+···+$n$ 的前 $n$ 项和为$n×(n+1)$

并且要注意, 它们的和交替出现, 为 $ 0$,$0$,($1$),[$2$],($4$),[$6$],($9$),[$12$],···,($k×k$),[$k×kk$];  $k=(i-1)/2$,$kk=i/2$;是不是很有规律？

但是我们还要注意，我们只是需要知道$B_n$的前$n$项和，而这个公式他可能包含后面多项的相同位置上的数！比如我们只要到第$3$项的第$5$位，而它包含第$4$项的第$5$位！
并且我们可以发现规律，从第$n+2$位开始到第$2n-1$位，我们多加了($1$)[$2$]($ 3$)...项, ()为奇数项, 我们只需在$i>=n+2$的时候减去这些多余的项即可

最后处理完我们不要忘了乘回36和处理进位, 再逆序打印即可。

AC代码如下:

```

#include <bits/stdc++.h> 
#define int long long
using namespace std;
const int N=3e7+10;
int n,m,t,k,res[N];
signed main() {
    cin>>n;
    for(int i=1;i<=n;i++)res[i]=(n-i+1)*i;//sum的第i位由n-i+1个i组成
	int k,kk,kkk=1;
	for(int i=3;i<=2*n-1;i++){
	    k=(i-1)/2;
	    kk=i/2;
	    if(i>=n+2){         //减去这些多余的项
	    	k-=kkk;
	    	kk-=kkk;
	    	kkk++;
		}
		if(i%2){
			
			res[i]+=k*k; //等差数列1，3，5求和
		}
		else {
			res[i]+=kk*k;//等差数列2，4，6求和
		}
	}
	int x=0,idx=1;
	while(x||idx<=2*n-1){
		int t=x+res[idx]*36;//在乘以36的同时处理进位
		x=t/10;
		res[idx]=t%10;
		idx++;
	}
	for(int i=idx-1;i>0;i--)
		cout<<res[i];
	
}

```